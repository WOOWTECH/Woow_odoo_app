# PRD: Odoo åå¥½è¨­å®šåŒæ­¥åŠŸèƒ½ (v1.0.16)

## æ¦‚è¿°

åœ¨ç¾æœ‰çš„ ProfileScreen ä¸­æ•´åˆ Odoo ä¼ºæœå™¨çš„åå¥½è¨­å®šï¼Œå¯¦ç¾ App èˆ‡ Odoo ä¼ºæœå™¨ä¹‹é–“çš„é›™å‘åŒæ­¥ã€‚

## åŠŸèƒ½ç¯„åœ

### åŸºæœ¬è¨­å®š (Preferences)

| æ¬„ä½ | Odoo æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|------|--------------|------|------|
| èªè¨€ (Language) | `lang` | é¸æ“‡å™¨ | å¾ Odoo å–å¾—å¯ç”¨èªè¨€æ¸…å–® |
| æ™‚å€ (Timezone) | `tz` | é¸æ“‡å™¨ | æ¨™æº–æ™‚å€æ¸…å–® |
| é€šçŸ¥ (Notification) | `notification_type` | é¸æ“‡å™¨ | `email` (é€ééƒµä»¶è™•ç†) / `inbox` (åœ¨ Odoo è™•ç†) |

### å€‹äººè¨­å®š (Personalization)

| æ¬„ä½ | Odoo æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|------|--------------|------|------|
| é›»å­éƒµä»¶ç°½ç«  (Email Signature) | `signature` | HTML ç·¨è¼¯å™¨ | éƒµä»¶ç°½ç« å…§å®¹ |

## UI è¨­è¨ˆ

### ProfileScreen æ–°å¢å€å¡Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ç¾æœ‰] å€‹äººè³‡æ–™å€å¡Š                  â”‚
â”‚  - é ­åƒã€å§“åã€Emailã€é›»è©±...        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºæœ¬è¨­å®š                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸŒ èªè¨€              ç¹é«”ä¸­æ–‡ > â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ ğŸ• æ™‚å€            Asia/Taipei > â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ ğŸ”” é€šçŸ¥           åœ¨ Odoo è™•ç† > â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å€‹äººè¨­å®š                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ‰ï¸ é›»å­éƒµä»¶ç°½ç«               >  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  (é»æ“Šé€²å…¥ç°½ç« ç·¨è¼¯é é¢)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [ å„²å­˜è®Šæ›´ ]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº’å‹•æ–¹å¼

- **èªè¨€**ï¼šé»æ“Šå½ˆå‡ºé¸æ“‡å°è©±æ¡†ï¼Œé¡¯ç¤º Odoo å¯ç”¨èªè¨€
- **æ™‚å€**ï¼šé»æ“Šå½ˆå‡ºé¸æ“‡å°è©±æ¡†ï¼Œé¡¯ç¤ºæ™‚å€æ¸…å–®
- **é€šçŸ¥**ï¼šé»æ“Šå½ˆå‡ºé¸æ“‡å°è©±æ¡†ï¼Œå…©å€‹é¸é …
- **é›»å­éƒµä»¶ç°½ç« **ï¼šé»æ“Šé€²å…¥ç¨ç«‹ç·¨è¼¯é é¢ï¼ˆHTML å…§å®¹ï¼‰

## è³‡æ–™æ¨¡å‹

### æ“´å±• UserProfile

```kotlin
data class UserProfile(
    // ç¾æœ‰æ¬„ä½
    val id: Int,
    val name: String,
    val login: String,
    val email: String? = null,
    val phone: String? = null,
    val mobile: String? = null,
    val website: String? = null,
    val function: String? = null,
    val imageBase64: String? = null,

    // æ–°å¢åå¥½è¨­å®šæ¬„ä½
    val lang: String? = null,           // e.g., "zh_TW"
    val tz: String? = null,             // e.g., "Asia/Taipei"
    val notificationType: String? = null, // "email" or "inbox"
    val signature: String? = null       // HTML content
)
```

### æ–°å¢ OdooLanguage è³‡æ–™é¡åˆ¥

```kotlin
data class OdooLanguage(
    val code: String,    // e.g., "zh_TW"
    val name: String     // e.g., "Chinese (TW) / ç¹é«”ä¸­æ–‡"
)
```

## API æ“´å±•

### 1. æ“´å±• getUserProfile

æ–°å¢è®€å–æ¬„ä½ï¼š`lang`, `tz`, `notification_type`, `signature`

### 2. æ–°å¢ getAvailableLanguages

```kotlin
suspend fun getAvailableLanguages(
    serverUrl: String,
    database: String,
    userId: Int,
    password: String
): List<OdooLanguage>
```

å‘¼å« `res.lang` æ¨¡å‹å–å¾—å·²å®‰è£çš„èªè¨€æ¸…å–®ã€‚

### 3. æ“´å±• updateUserProfile

æ”¯æ´æ›´æ–°æ–°å¢çš„åå¥½è¨­å®šæ¬„ä½ã€‚

## æ™‚å€æ¸…å–®

ä½¿ç”¨æ¨™æº– IANA æ™‚å€ï¼Œå¸¸ç”¨é¸é …åŒ…æ‹¬ï¼š
- Asia/Taipei
- Asia/Tokyo
- Asia/Shanghai
- Asia/Hong_Kong
- Asia/Singapore
- America/New_York
- America/Los_Angeles
- Europe/London
- Europe/Paris
- UTC

## å¯¦ä½œæª”æ¡ˆæ¸…å–®

| æª”æ¡ˆ | è®Šæ›´é¡å‹ | èªªæ˜ |
|------|----------|------|
| `UserProfile.kt` | ä¿®æ”¹ | æ–°å¢åå¥½è¨­å®šæ¬„ä½ |
| `OdooJsonRpcClient.kt` | ä¿®æ”¹ | æ–°å¢ getAvailableLanguagesã€æ“´å±•è®€å–/å¯«å…¥æ¬„ä½ |
| `AccountRepository.kt` | ä¿®æ”¹ | æ–°å¢èªè¨€æ¸…å–®å¿«å– |
| `ProfileViewModel.kt` | ä¿®æ”¹ | æ–°å¢åå¥½è¨­å®šç‹€æ…‹ç®¡ç† |
| `ProfileScreen.kt` | ä¿®æ”¹ | æ–°å¢åå¥½è¨­å®š UI å€å¡Šå’Œå°è©±æ¡† |
| `SignatureEditScreen.kt` | æ–°å¢ | é›»å­éƒµä»¶ç°½ç« ç·¨è¼¯é é¢ |
| `NavGraph.kt` | ä¿®æ”¹ | æ–°å¢ç°½ç« ç·¨è¼¯é é¢è·¯ç”± |
| `strings.xml` | ä¿®æ”¹ | æ–°å¢å¤šèªç³»å­—ä¸² |

## åŒæ­¥æ©Ÿåˆ¶

1. **è¼‰å…¥æ™‚**ï¼šé€²å…¥ ProfileScreen æ™‚å¾ Odoo API è®€å–æ‰€æœ‰æ¬„ä½
2. **ä¿®æ”¹å¾Œ**ï¼šé»æ“Šã€Œå„²å­˜è®Šæ›´ã€æŒ‰éˆ•åŒæ­¥å› Odoo ä¼ºæœå™¨
3. **ç‹€æ…‹æŒ‡ç¤º**ï¼šé¡¯ç¤ºè¼‰å…¥/å„²å­˜é€²åº¦æŒ‡ç¤ºå™¨
4. **éŒ¯èª¤è™•ç†**ï¼šé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œå…è¨±é‡è©¦

## ç‰ˆæœ¬è³‡è¨Š

- ç‰ˆæœ¬è™Ÿï¼š1.0.16
- é è¨ˆåŒ…å«ï¼šLogo æ›´æ–° + Odoo åå¥½è¨­å®šåŒæ­¥åŠŸèƒ½
